<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Visor 3D — OÍDO</title>
  <link rel="stylesheet" href="css/styles.css"/>
  <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
  <script>
    AFRAME.registerComponent('hotspot', {
      schema: { label: {type:'string'}, color:{type:'string', default:'#fff'} },
      init(){
        const el = this.el, d = this.data;
        const sphere = document.createElement('a-sphere');
        sphere.setAttribute('radius','0.01');
        sphere.setAttribute('color', d.color);
        sphere.setAttribute('opacity','0.8');
        el.appendChild(sphere);

        const text = document.createElement('a-entity');
        text.setAttribute('text', { value: d.label, align:'center', width: 1.2 });
        text.setAttribute('position','0 0.03 0');
        text.setAttribute('visible', false);
        el.appendChild(text);

        el.addEventListener('mouseenter', ()=> text.setAttribute('visible', true));
        el.addEventListener('mouseleave', ()=> text.setAttribute('visible', false));
      }
    });
  </script>
</head>
<body>
  <div class="container">
    <header class="header">
      <div class="brand">
        <div class="logo"><svg viewBox="0 0 24 24"><use href="#ico-ear"></use></svg></div>
        <h1>Visor 3D — OÍDO</h1>
      </div>
      <nav class="actions">
        <a class="btn" href="index.html"><svg class="ico"><use href="#ico-home"></use></svg> Inicio</a>
        <a class="btn" href="glosario.html"><svg class="ico"><use href="#ico-glossary"></use></svg> Glosario</a>
      </nav>
    </header>
    <section class="card" style="padding:0;overflow:hidden">
      <div style="height:70vh; min-height:420px;">
        <a-scene renderer="antialias:true">
          <a-assets>
            <a-asset-item id="mdl" src="assets/models/oido.glb"></a-asset-item>
          </a-assets>

          <a-entity position="0 1.6 0">
            <a-entity gltf-model="#mdl" position="0 1.5 -1.5" rotation="0 40 0"></a-entity>
            <!-- Hotspots de ejemplo (ajusta posiciones al modelo real) -->
            <a-entity hotspot="label: Pabellón auricular; color: #60a5fa" position="-0.05 1.6 -1.2"></a-entity>
            <a-entity hotspot="label: Tímpano; color: #f59e0b" position="0 1.5 -1.1"></a-entity>
            <a-entity hotspot="label: Cadena osicular; color: #34d399" position="0.05 1.52 -1.1"></a-entity>
            <a-entity hotspot="label: Cóclea; color: #c084fc" position="0.12 1.48 -1.2"></a-entity>
          </a-entity>

          <a-entity position="0 1.6 0">
            <a-camera wasd-controls-enabled="false">
              <a-entity cursor="rayOrigin: mouse"></a-entity>
            </a-camera>
          </a-entity>

          <a-entity light="type: ambient; intensity: 0.9"></a-entity>
          <a-entity light="type: directional; intensity: 0.6" position="0 1 -1"></a-entity>
          <a-sky color="#0b1020"></a-sky>
        </a-scene>
      </div>
    </section>
  </div>

  <!-- Defs/Icons inline (para que se vean aquí también) -->
  <svg width="0" height="0" style="position:absolute">
    <defs>
      <linearGradient id="g-blue" x1="0" y1="0" x2="1" y2="1"><stop offset="0%" stop-color="#60a5fa"/><stop offset="100%" stop-color="#3b82f6"/></linearGradient>
      <linearGradient id="g-green" x1="0" y1="0" x2="1" y2="1"><stop offset="0%" stop-color="#34d399"/><stop offset="100%" stop-color="#10b981"/></linearGradient>
      <linearGradient id="g-orange" x1="0" y1="0" x2="1" y2="1"><stop offset="0%" stop-color="#fbbf24"/><stop offset="100%" stop-color="#f59e0b"/></linearGradient>
      <linearGradient id="g-purple" x1="0" y1="0" x2="1" y2="1"><stop offset="0%" stop-color="#c084fc"/><stop offset="100%" stop-color="#8b5cf6"/></linearGradient>
    </defs>
  </svg>
  <svg width="0" height="0" style="position:absolute">
    <symbol id="ico-home" viewBox="0 0 24 24"><path fill="url(#g-blue)" d="M12 3l9 8h-3v9h-5v-6H11v6H6v-9H3z"/></symbol>
    <symbol id="ico-ear" viewBox="0 0 24 24"><path fill="url(#g-green)" d="M12 2C7.58 2 4 5.58 4 10c0 2.21.9 4.21 2.35 5.65l.71.71c.58.58.94 1.38.94 2.26V20a2 2 0 002 2h1a2 2 0 002-2v-1c0-1.66 1.34-3 3-3h.5a3.5 3.5 0 000-7H18a6 6 0 10-12 0h2a4 4 0 118 0h.5a1.5 1.5 0 010 3H17c-2.76 0-5 2.24-5 5v1h-1v-1c0-1.32-.53-2.62-1.46-3.54l-.71-.71A6.984 6.984 0 015 10c0-3.86 3.14-7 7-7s7 3.14 7 7h-2c0-2.76-2.24-5-5-5z"/></symbol>
    <symbol id="ico-glossary" viewBox="0 0 24 24"><path fill="url(#g-orange)" d="M6 2h9a3 3 0 013 3v14a3 3 0 01-3 3H6a2 2 0 01-2-2V4a2 2 0 012-2zm0 2v16h9a1 1 0 001-1V5a1 1 0 00-1-1H6z"/></symbol>
  </svg>
</body>
</html>
<!-- placeholder -->
