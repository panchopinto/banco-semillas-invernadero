<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Banco de Semillas â€” Dashboard</title>
  <link rel="stylesheet" href="css/styles.css"/>
  <link rel="icon" href="img/seedling.svg" type="image/svg+xml"/>
  <script defer src="js/app.js"></script>
</head>
<body>
<header class="topbar">
  <div class="brand">
    <svg class="logo" viewBox="0 0 24 24" aria-hidden="true">
      <path d="M12 22c4-4 6-8 6-12a6 6 0 0 0-12 0c0 4 2 8 6 12z"></path>
      <circle cx="12" cy="7.2" r="1.6"></circle>
    </svg>
    <div>
      <h1>Banco de Semillas</h1>
      <small id="today"></small>
    </div>
  </div>

  <div class="actions">
    <button class="btn grad-green" id="btn-add">
      <span class="icon">ğŸŒ±</span> AÃ±adir semilla
    </button>
    <button class="btn grad-blue" id="btn-import">
      <span class="icon">ğŸ“¥</span> Importar CSV
    </button>
    <button class="btn grad-orange" id="btn-export">
      <span class="icon">ğŸ“¤</span> Exportar CSV
    </button>
    <button class="btn grad-purple" id="btn-calendar">
      <span class="icon">ğŸ“…</span> Calendario de siembras
    </button>
    <button class="btn grad-teal" id="btn-reset">
      <span class="icon">ğŸ§¹</span> Limpiar filtro
    </button>
    <button class="btn grad-pink" id="btn-theme">
      <span class="icon">ğŸŒ“</span> Tema
    </button>
    <input type="file" id="file-input" accept=".csv" hidden />
  </div>
</header>

<div class="a11y-toolbar" role="region" aria-label="Herramientas de accesibilidad">
  <button class="btn" id="a11y-contrast" title="Activar/Desactivar alto contraste">ğŸŒ“ Alto contraste</button>
  <button class="btn" id="a11y-font-plus" title="Aumentar tamaÃ±o de fuente">ğŸ” A+</button>
  <button class="btn" id="a11y-font-minus" title="Disminuir tamaÃ±o de fuente">ğŸ” Aâˆ’</button>
  <button class="btn" id="a11y-readable" title="Modo lectura amigable">ğŸ“– Lectura</button>
  <button class="btn" id="a11y-theme-garden" title="Fondo verde tipo invernadero">ğŸŒ¿ Fondo verde</button>
  <button class="btn" id="a11y-theme-light" title="Tema claro">ğŸŒ Tema claro</button>
  <button class="btn" id="a11y-theme-dark" title="Tema oscuro">ğŸŒ™ Tema oscuro</button>
</div>


<main>
  <section class="kpis">
    <div class="kpi card">
      <div class="kpi-label">Total variedades</div>
      <div class="kpi-value" id="kpi-total">0</div>
    </div>
    <div class="kpi card">
      <div class="kpi-label">Tipos (distribuciÃ³n)</div>
      <div class="kpi-value" id="kpi-tipos">â€”</div>
    </div>
    <div class="kpi card">
      <div class="kpi-label">Stock (sobres)</div>
      <div class="kpi-value" id="kpi-stock">0</div>
    </div>
    <div class="kpi card warn">
      <div class="kpi-label">PrÃ³ximas a caducar</div>
      <div class="kpi-value" id="kpi-exp">0</div>
    </div>
  </section>

  <section class="filters card">
    <div class="row">
      <input id="q" class="input" placeholder="Buscar por nombre, cientÃ­fico, familia, notasâ€¦"/>
      <select id="f-tipo" class="select">
        <option value="">Tipo (todos)</option>
        <option>Hortaliza</option><option>Frutal</option><option>Hierba/AromÃ¡tica</option>
        <option>Flor</option><option>Legumbre/Grano</option><option>Nativo</option>
      </select>
      <select id="f-familia" class="select">
        <option value="">Familia (todas)</option>
      </select>
      <select id="f-ciclo" class="select">
        <option value="">Ciclo (todos)</option>
        <option>Anual</option><option>Bianual</option><option>Perenne</option>
      </select>
      <select id="f-epoca" class="select">
        <option value="">Ã‰poca actual</option>
        <option value="siembra">En Ã©poca de siembra</option>
        <option value="transplante">En Ã©poca de trasplante</option>
      </select>
      <button class="btn grad-teal" id="btn-aplicar">Aplicar</button>
    </div>
    <div class="row wrap">
      <label class="chip"><input type="checkbox" id="c-invernadero"/> Invernadero</label>
      <label class="chip"><input type="checkbox" id="c-exterior"/> Exterior</label>
      <label class="chip"><input type="checkbox" id="c-pie"/> PIE (adaptado)</label>
      <label class="chip"><input type="checkbox" id="c-semilla-propia"/> Semilla propia</label>
      <label class="chip"><input type="checkbox" id="c-organica"/> OrgÃ¡nica</label>
    </div>
  </section>

  <section class="grid">
    <aside class="card side">
      <h3>Resumen</h3>
      <canvas id="chartTipos" width="360" height="260" aria-label="DistribuciÃ³n por tipo"></canvas>
      <hr/>
      <h3>Calendario sugerido</h3>
      <div id="calendar" class="calendar"></div>
    </aside>

    <section class="card table">
      <div class="table-head">
        <div>Nombre comÃºn</div>
        <div>Nombre cientÃ­fico</div>
        <div>Familia</div>
        <div>Tipo</div>
        <div>Siembra</div>
        <div>GerminaciÃ³n</div>
        <div>Prof./Dist.</div>
        <div>Riego</div>
        <div>UbicaciÃ³n</div>
        <div>Stock</div>
        <div>Responsable</div>
        <div>Acciones</div>
      </div>
      <div id="rows" class="table-rows"></div>
    </section>
  </section>
</main>

<footer>
  <div>Creado por: Francisco Pinto Aravena â€” franciscoandresp@gmail.com</div>
  <div>Este proyecto educativo apoya el PIE y la innovaciÃ³n en el invernadero.</div>
  <div>Â© <span class="year"></span> Todos los derechos reservados.</div>
</footer>

<!-- Modal -->
<dialog id="modal">
  <form id="form" method="dialog" class="modal card">
    <h3 id="modal-title">Nueva semilla</h3>
    <input type="hidden" id="id"/>
    <div class="grid-form">
      <label>Nombre comÃºn<input id="nombre" required placeholder="Ej: Lechuga Romana"/></label>
      <label>Nombre cientÃ­fico<input id="cientifico" placeholder="Ej: Lactuca sativa"/></label>
      <label>Familia<input id="familia" placeholder="Ej: Asteraceae"/></label>
      <label>Tipo
        <select id="tipo" required>
          <option>Hortaliza</option><option>Frutal</option><option>Hierba/AromÃ¡tica</option>
          <option>Flor</option><option>Legumbre/Grano</option><option>Nativo</option>
        </select>
      </label>
      <label>Ciclo
        <select id="ciclo">
          <option>Anual</option><option>Bianual</option><option>Perenne</option>
        </select>
      </label>
      <label>Periodo de siembra (meses, ej: sep-oct, mar-abr)<input id="siembra" placeholder="Ej: sep-oct / mar-abr"/></label>
      <label>Periodo de trasplante (opcional)<input id="trasplante" placeholder="Opcional"/></label>
      <label>DÃ­as germinaciÃ³n (ej: 7-14)<input id="germinacion" placeholder="Ej: 7-14"/></label>
      <label>Temp. germinaciÃ³n (Â°C)<input id="temp" placeholder="Ej: 18-22"/></label>
      <label>Profundidad siembra (cm)<input id="prof" placeholder="Ej: 0.5-1.0"/></label>
      <label>Distancia plantas (cm)<input id="dist" placeholder="Ej: 25-30"/></label>
      <label>Luz
        <select id="luz">
          <option>Sol</option><option>Semisombra</option><option>Sombra</option>
        </select>
      </label>
      <label>Riego
        <select id="riego">
          <option>Bajo</option><option>Medio</option><option>Alto</option>
        </select>
      </label>
      <label>UbicaciÃ³n (estanterÃ­a/caja)<input id="ubicacion" placeholder="Ej: Estante B - Caja 3"/></label>
      <label>Stock (sobres)<input id="stock" type="number" min="0" value="1" placeholder="Sobres disponibles"/></label>
      <label>Fecha recolecciÃ³n/lote<input id="lote" placeholder="Ej: 2025-09 / Lote-12"/></label>
      <label>Vida Ãºtil estimada (aÃ±os)<input id="vida" placeholder="Ej: 2"/></label>
      <label>Responsable/Profesor<input id="responsable" placeholder="Ej: Prof. Francisco Pinto"/></label>
      <label>Curso/Proyecto<input id="curso" placeholder="Ej: 3Â°A / Proyecto HidroponÃ­a"/></label>
      <label>Uso previsto (actividad)<input id="uso" placeholder="Ej: Siembra en mesÃ³n NFT / PrÃ¡ctica germinaciÃ³n"/></label>
      <label>Compatibilidades/Asociaciones<input id="asocia" placeholder="zanahoria + cebollaâ€¦"/></label>
      <label>AlelopatÃ­as/No combinar<input id="anti" placeholder="no conâ€¦"/></label>
      <label>Plagas comunes<input id="plagas" placeholder="Ej: pulgones, minadores"/></label>
      <label>Recomendaciones<textarea id="reco" rows="2"></textarea></label>
      <label>Notas<textarea id="notas" rows="2"></textarea></label>
      <label class="check"><input type="checkbox" id="pie"/> Adaptaciones PIE</label>
      <label class="check"><input type="checkbox" id="organica"/> Semilla orgÃ¡nica</label>
      <label class="check"><input type="checkbox" id="propia"/> Semilla propia</label>
    </div>
    <menu class="modal-actions">
      <button type="reset" class="btn ghost" id="btn-cancel"><span class="i">âœ–ï¸</span> Cancelar</button>
      <button type="submit" class="btn grad-green" id="btn-save"><span class="i">ğŸ’¾</span> Guardar</button>
    </menu>
  </form>
</dialog>

<template id="row-tpl">
  <div class="row">
    <div class="cell nombre"></div>
    <div class="cell cientifico"></div>
    <div class="cell familia"></div>
    <div class="cell tipo"></div>
    <div class="cell siembra"></div>
    <div class="cell germ"></div>
    <div class="cell profdist"></div>
    <div class="cell riego"></div>
    <div class="cell ubicacion"></div>
    <div class="cell stock"></div>
    <div class="cell resp"></div>
    <div class="cell actions">
      <button class="icon-btn edit" title="Editar">âœï¸</button>
      <button class="icon-btn del" title="Eliminar">ğŸ—‘ï¸</button>
      <button class="icon-btn qr" title="QR detalle">ğŸ”—</button>
    </div>
  </div>
</template>

<script>
// fecha hoy (America/Santiago)
document.querySelector('.year').textContent = new Date().getFullYear();
const tz = Intl.DateTimeFormat().resolvedOptions().timeZone || "America/Santiago";
document.getElementById('today').textContent = new Date().toLocaleString('es-CL', { dateStyle:'full', timeStyle:'short' }) + " Â· " + tz;
</script>
</body>
</html>
